(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function p(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(r){if(r.ep)return;r.ep=!0;const e=p(r);fetch(r.href,e)}})();const a={en:new Map(Object.entries({Backquote:{lower:"`",upper:"~"},Digit1:{lower:"1",upper:"!"},Digit2:{lower:"2",upper:"@"},Digit3:{lower:"3",upper:"#"},Digit4:{lower:"4",upper:"$"},Digit5:{lower:"5",upper:"%"},Digit6:{lower:"6",upper:"^"},Digit7:{lower:"7",upper:"&"},Digit8:{lower:"8",upper:"*"},Digit9:{lower:"9",upper:"("},Digit0:{lower:"0",upper:")"},Minus:{lower:"-",upper:"_"},Equal:{lower:"=",upper:"+"},Tab:{lower:"	",upper:"	"},KeyQ:{lower:"q",upper:"Q"},KeyW:{lower:"w",upper:"W"},KeyE:{lower:"e",upper:"E"},KeyR:{lower:"r",upper:"R"},KeyT:{lower:"t",upper:"T"},KeyY:{lower:"y",upper:"Y"},KeyU:{lower:"u",upper:"U"},KeyI:{lower:"i",upper:"I"},KeyO:{lower:"o",upper:"O"},KeyP:{lower:"p",upper:"P"},BracketLeft:{lower:"[",upper:"{"},BracketRight:{lower:"]",upper:"}"},Backslash:{lower:"\\",upper:"|"},KeyA:{lower:"a",upper:"A"},KeyS:{lower:"s",upper:"S"},KeyD:{lower:"d",upper:"D"},KeyF:{lower:"f",upper:"F"},KeyG:{lower:"g",upper:"G"},KeyH:{lower:"h",upper:"H"},KeyJ:{lower:"j",upper:"J"},KeyK:{lower:"k",upper:"K"},KeyL:{lower:"l",upper:"L"},Semicolon:{lower:";",upper:":"},Quote:{lower:"'",upper:'"'},Enter:{lower:`
`,upper:`
`},KeyZ:{lower:"z",upper:"Z"},KeyX:{lower:"x",upper:"X"},KeyC:{lower:"c",upper:"C"},KeyV:{lower:"v",upper:"V"},KeyB:{lower:"b",upper:"B"},KeyN:{lower:"n",upper:"N"},KeyM:{lower:"m",upper:"M"},Comma:{lower:",",upper:"<"},Period:{lower:".",upper:">"},Slash:{lower:"/",upper:"?"},ArrowUp:{lower:"▲",upper:"▲"},Space:{lower:" ",upper:" "},ArrowLeft:{lower:"◄",upper:"◄"},ArrowDown:{lower:"▼",upper:"▼"},ArrowRight:{lower:"►",upper:"►"}})),ru:new Map(Object.entries({Backquote:{lower:"ё",upper:"Ё"},Digit1:{lower:"1",upper:"!"},Digit2:{lower:"2",upper:'"'},Digit3:{lower:"3",upper:"№"},Digit4:{lower:"4",upper:";"},Digit5:{lower:"5",upper:"%"},Digit6:{lower:"6",upper:":"},Digit7:{lower:"7",upper:"?"},Digit8:{lower:"8",upper:"*"},Digit9:{lower:"9",upper:"("},Digit0:{lower:"0",upper:")"},Minus:{lower:"-",upper:"_"},Equal:{lower:"=",upper:"+"},Tab:{lower:"	",upper:"	"},KeyQ:{lower:"й",upper:"Й"},KeyW:{lower:"ц",upper:"Ц"},KeyE:{lower:"у",upper:"У"},KeyR:{lower:"к",upper:"К"},KeyT:{lower:"е",upper:"Е"},KeyY:{lower:"н",upper:"Н"},KeyU:{lower:"г",upper:"Г"},KeyI:{lower:"ш",upper:"Ш"},KeyO:{lower:"щ",upper:"Щ"},KeyP:{lower:"з",upper:"З"},BracketLeft:{lower:"х",upper:"Х"},BracketRight:{lower:"ъ",upper:"Ъ"},Backslash:{lower:"\\",upper:"/"},KeyA:{lower:"ф",upper:"Ф"},KeyS:{lower:"ы",upper:"Ы"},KeyD:{lower:"в",upper:"В"},KeyF:{lower:"а",upper:"А"},KeyG:{lower:"п",upper:"П"},KeyH:{lower:"р",upper:"Р"},KeyJ:{lower:"о",upper:"О"},KeyK:{lower:"л",upper:"Л"},KeyL:{lower:"д",upper:"Д"},Semicolon:{lower:"ж",upper:"Ж"},Quote:{lower:"э",upper:"Э"},Enter:{lower:`
`,upper:`
`,breakRow:!0},KeyZ:{lower:"я",upper:"Я"},KeyX:{lower:"ч",upper:"Ч"},KeyC:{lower:"с",upper:"С"},KeyV:{lower:"м",upper:"М"},KeyB:{lower:"и",upper:"И"},KeyN:{lower:"т",upper:"Т"},KeyM:{lower:"ь",upper:"Ь"},Comma:{lower:"б",upper:"Б"},Period:{lower:"ю",upper:"Ю"},Slash:{lower:".",upper:","},ArrowUp:{lower:"▲",upper:"▲"},Space:{lower:" ",upper:" "},ArrowLeft:{lower:"◄",upper:"◄"},ArrowDown:{lower:"▼",upper:"▼"},ArrowRight:{lower:"►",upper:"►"}})),sys:new Map(Object.entries({Backspace:{pos:14,label:"Backspace",breakRow:!0},Delete:{pos:29,label:"Delete",breakRow:!0},CapsLock:{pos:30,label:"Caps Lock"},ShiftLeft:{pos:43,label:"Shift"},ShiftRight:{pos:55,label:"Shift",breakRow:!0},ControlLeft:{pos:56,label:"Ctrl"},AltLeft:{pos:57,label:"Alt"},AltRight:{pos:59,label:"Alt"},ControlRight:{pos:63,label:"Ctrl"}}))},u={elements:{self:null,keys:[]},props:{layouts:a,targetElem:null},state:{currentLayout:"en",isCapsLocked:!1,pressed:new Set},init(){this.state.currentLayout=localStorage.layout??"en",this.elements.self=document.createElement("div"),this.elements.self.setAttribute("id","keyboard"),document.getElementById("main").append(this.elements.self);const t=e=>{this.state.pressed.add(e.code)},s=e=>{this.state.pressed.delete(e.code)},p=e=>{(e.code==="ShiftLeft"||e.code==="ShiftRight")&&this.showChars(this.visibleCharsSelector())},l=()=>{this.state.pressed.has("ControlLeft")&&this.state.pressed.has("AltLeft")&&(localStorage.layout=localStorage.layout==="en"?"ru":"en",this.state.currentLayout=localStorage.layout,this.showChars(this.visibleCharsSelector()))},r=e=>{e.code==="CapsLock"&&(this.state.isCapsLocked=!this.state.isCapsLocked),this.showChars(this.visibleCharsSelector())};document.addEventListener("keydown",t),document.addEventListener("keydown",p),document.addEventListener("keyup",s),document.addEventListener("keyup",p),document.addEventListener("keydown",l),document.addEventListener("keydown",r),document.addEventListener("keydown",e=>{const o=this.props.layouts[this.state.currentLayout],i=document.getElementById(e.code);i.classList.add("key--pressed"),o.has(e.code)&&(e.preventDefault(),i.click())}),document.addEventListener("keyup",e=>{document.getElementById(e.code).classList.remove("key--pressed")}),this.createKeys(),this.createSysKeys(),this.elements.keys.sort((e,o)=>e.tabIndex-o.tabIndex),this.elements.self.append(...this.elements.keys),this.showChars(this.visibleCharsSelector())},createKeys(){const t=a.en,s=[...a.sys.values()].map(l=>l.pos);let p=1;t.forEach((l,r)=>{for(;s.indexOf(p)!==-1;)p+=1;const e=document.createElement("div");e.classList.add("key"),e.setAttribute("id",r),e.setAttribute("tabindex",p),e.innerHTML=`
        <span class="char char--en char--lower">${a.en.get(r).lower}</span>
        <span class="char char--en char--upper">${a.en.get(r).upper}</span>
        <span class="char char--ru char--lower">${a.ru.get(r).lower}</span>
        <span class="char char--ru char--upper">${a.ru.get(r).upper}</span>
      `,r==="Enter"&&(e.innerHTML="Enter",e.classList.add("key--wide")),r==="Space"&&e.classList.add("key--space"),r==="Tab"&&(e.innerHTML="Tab",e.classList.add("key--wide")),e.addEventListener("click",()=>{const o=a[this.state.currentLayout].get(r);this.props.targetElem.value+=this.isUpper()?o.upper:o.lower}),p+=1,this.elements.keys.push(e)})},createSysKeys(){a.sys.forEach(({pos:s,label:p},l)=>{const r=document.createElement("div");r.classList.add("key"),r.classList.add("key--wide"),r.setAttribute("id",l),r.setAttribute("tabindex",s),r.innerHTML=p,this.elements.keys.push(r)})},bindTo(t){this.props.targetElem=t},isUpper(){const t=this.state.pressed.has("ShiftLeft")||this.state.pressed.has("ShiftRight");return this.state.isCapsLocked&&!t||!this.state.isCapsLocked&&t},showChars(t){document.querySelectorAll(".char--visible").forEach(s=>{s.classList.remove("char--visible")}),document.querySelectorAll(t).forEach(s=>{s.classList.add("char--visible")})},visibleCharsSelector(){return this.isUpper()&&this.state.currentLayout==="en"?".char--en.char--upper":this.isUpper()&&this.state.currentLayout==="ru"?".char--ru.char--upper":!this.isUpper()&&this.state.currentLayout==="ru"?".char--ru.char--lower":".char--en.char--lower"}};document.querySelector("#app").innerHTML=`
  <header id="header">
    <h1 class="heading">RSS Virtual Keyboard</h1>
  </header>
  <main id="main">
    <textarea id="test-area" name="test-area" rows="8" cols="70">try some buttons</textarea>
  </main>
  <footer id="footer">
    <p>
      Keyboard developed on Ubuntu OS
      <br>
      Press Left(Ctrl + Alt) to switch language to Russian
    </p>
  </footer>
`;document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("test-area");u.bindTo(t),u.init(),alert("Привет! Я из-за работы не успел доделать некоторые моменты (описал в PR) -- буду признателен, если дашь мне еще немного времени и перепроверишь. Thanks!")});
